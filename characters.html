---
layout: default
title: Character Wiki
---
<!-- Sorting Tabs -->
<div class="character-sort-tabs" style="text-align: center; margin-bottom: 20px;">
  <button id="popularity-tab" class="sort-tab active" style="padding: 10px 20px; margin: 0 5px;">Popularity</button>
  <button id="alphabetical-tab" class="sort-tab" style="padding: 10px 20px; margin: 0 5px;">Alphabetical</button>
  <button id="sorted-tab" class="sort-tab" style="padding: 10px 20px; margin: 0 5px;">Sorted</button>
</div>

<!-- Popularity View (Default) -->
<div id="popularity-container" class="character-view-container">
  {% assign rankedSlugs = site.data.character_ranking | map: "slug" %}
  {% for entry in site.data.character_ranking %}
    {% assign found_character = nil %}
    {% for char in site.characters %}
      {% assign thisSlug = char.title | slugify %}
      {% if thisSlug == entry.slug %}
        {% assign found_character = char %}
      {% endif %}
    {% endfor %}
    {% if found_character %}
      <a href="{{ found_character.url }}" class="character-item">
        <div class="character-image" style="background-image: url('{{ found_character.image | default: 'https://via.placeholder.com/420' }}');"></div>
        <div class="character-name">{{ found_character.title }}</div>
      </a>
    {% endif %}
  {% endfor %}
  {% assign unranked = site.characters | sort: "title" %}
  {% for char in unranked %}
    {% assign slug = char.title | slugify %}
    {% unless rankedSlugs contains slug %}
      <a href="{{ char.url }}" class="character-item">
        <div class="character-image" style="background-image: url('{{ char.image | default: 'https://via.placeholder.com/420' }}');"></div>
        <div class="character-name">{{ char.title }}</div>
      </a>
    {% endunless %}
  {% endfor %}
</div>

<!-- Alphabetical View -->
<div id="alphabetical-container" class="character-view-container" style="display: none;">
  {% assign alpha_chars = site.characters | sort: "title" %}
  {% for character in alpha_chars %}
    <a href="{{ character.url }}" class="character-item">
      <div class="character-image" style="background-image: url('{{ character.image | default: 'https://via.placeholder.com/420' }}');"></div>
      <div class="character-name">{{ character.title }}</div>
    </a>
  {% endfor %}
</div>

<!-- Sorted (Categories) View -->
<div id="sorted-container" class="character-view-container" style="display: none;">
  <!-- CATEGORY LIST (appears by default when Sorted tab is clicked) -->
  <div id="sorted-category-list" class="character-view-container">
    {% for category in site.data.character_categories %}
      <a href="javascript:void(0)" class="character-item" onclick="loadCategory('{{ category.slug }}')">
        <div class="character-image" style="background-image: url('{{ category.image | default: 'https://via.placeholder.com/420' }}');"></div>
        <div class="character-name">{{ category.name }}</div>
      </a>
    {% endfor %}
  </div>

  <!-- ONE CONTAINER PER CATEGORY (hidden until you click that category) -->
  {% for category in site.data.character_categories %}
  <div id="category-{{ category.slug }}-container" class="character-view-container" style="display: none;">
    {% for charSlug in category.characters %}
      {% assign matched_character = site.characters | where_exp: "c", "c.title | slugify == charSlug" | first %}
      {% if matched_character %}
        <a href="{{ matched_character.url }}" class="character-item">
          <div class="character-image" style="background-image: url('{{ matched_character.image | default: 'https://via.placeholder.com/420' }}');"></div>
          <div class="character-name">{{ matched_character.title }}</div>
        </a>
      {% endif %}
    {% endfor %}
  </div>
  {% endfor %}
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
  var popularityTab = document.getElementById('popularity-tab');
  var alphabeticalTab = document.getElementById('alphabetical-tab');
  var sortedTab = document.getElementById('sorted-tab');

  var popularityContainer = document.getElementById('popularity-container');
  var alphabeticalContainer = document.getElementById('alphabetical-container');
  var sortedContainer = document.getElementById('sorted-container');

  function clearActive() {
    var tabs = document.querySelectorAll('.sort-tab');
    tabs.forEach(function(tab){
      tab.classList.remove('active');
    });
  }

  if (popularityTab) {
    popularityTab.addEventListener('click', function(){
      clearActive();
      popularityTab.classList.add('active');
      popularityContainer.style.display = 'grid';
      alphabeticalContainer.style.display = 'none';
      sortedContainer.style.display = 'none';
    });
  }

  if (alphabeticalTab) {
    alphabeticalTab.addEventListener('click', function(){
      clearActive();
      alphabeticalTab.classList.add('active');
      popularityContainer.style.display = 'none';
      alphabeticalContainer.style.display = 'grid';
      sortedContainer.style.display = 'none';
    });
  }

  if (sortedTab) {
    sortedTab.addEventListener('click', function(){
      clearActive();
      sortedTab.classList.add('active');
      popularityContainer.style.display = 'none';
      alphabeticalContainer.style.display = 'none';
      sortedContainer.style.display = 'grid';

      // Show category list, hide all category containers
      var categoryList = document.getElementById('sorted-category-list');
      if(categoryList) categoryList.style.display = 'grid';

      var categoryContainers = document.querySelectorAll('#sorted-container .character-view-container[id^="category-"]');
      categoryContainers.forEach(function(container) {
        container.style.display = 'none';
      });
    });
  }
});

function loadCategory(slug) {
  // Hide the category list
  var categoryList = document.getElementById('sorted-category-list');
  if(categoryList) categoryList.style.display = 'none';

  // Show the chosen category's container
  var container = document.getElementById('category-' + slug + '-container');
  if (container) {
    container.style.display = 'grid';
  }
}
</script>
